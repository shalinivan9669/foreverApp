# ???????? ????? (UI-?????)

## ????
?????? ????? ?????? ???? ??????? ??? 2 ????????: ??? ???, ??? ????, ??????? ???????, ?????? ? ??? ?????????? ?? CTA.

## ????????? ???????? (6 ??????)
1) **??????? ??????**
   - ?????: ?????? + ?????? (????????????/???????/?????/???/???????/???????)
   - ??????: ????????? + ??????-????? (???????? 2 ??????)

2) **?????????**
   - ???????? (1?2 ??????)
   - ???????????? (1 ??????): ???? ??????? / ??? ????????

3) **??????? ??????????/????????**
   - ? `estMinutesMin?estMinutesMax`
   - ? `questionCount`
   - ? `level` (??????? 1?5)
   - ???????????: ?? `rewardCoins`, ?? `insightsCount`

4) **????**
   - ?????????? 0?2, ????????? ? ?+N?
   - ???????? ????????? ???? (`baseline`, `multi-axis`, `starter`)

5) **???: ???????? + CTA**
   - `new`: CTA ????????
   - `required`: CTA ??????? ????????? ???????
   - `in_progress`: ????????-??? + CTA ????????????
   - `completed`: ???????? ?????????? + ???????
   - `locked`: CTA disabled + ???????

6) **????????? ??????**
   - ?????????? ?????????
   - ??????: ? ???????????
   - value: ???????? ??????? ???? / ??????? ?????????????

## ????????? ????????
- `new`
- `required`
- `in_progress`
- `completed`
- `locked`

## ???????????
- ???????? 2 ?????? ?????? ??????
- ???????? 2 ???? + ?+N?
- ?????? ?????? ???????? (min-h + ??????????? ?????? ??????)

## DTO (?????? ??? UI)
???????? ?????????? ?? ?????????? DTO `/api/questionnaires/cards`:

```
QuestionnaireCardDTO = {
  id,
  vector,
  audience,
  title,
  subtitle,
  tagsPublic,
  tagsHiddenCount,
  questionCount,
  estMinutesMin,
  estMinutesMax,
  level,
  rewardCoins?,
  insightsCount?,
  status,
  progressPct?,
  lockReason?,
  cta,
  isStarter?,
  pairId?
}
```

## ??????? ?UI ???? ? ???????? ? ???????????
| UI ???? | ???????? | ??????????/??????? |
|---|---|---|
| title | `Questionnaire.title` | ????? `ru` ? `en` ? `_id` |
| subtitle | `Questionnaire.description` | `ru/en`, ????? ?????????? {axis}? |
| vector | `Questionnaire.axis` | ?????? ???????? |
| audience | `Questionnaire.target` | `couple` ? `pair`, ????? `universal/solo` |
| questionCount | `Questionnaire.questions` | `$size` ??????? ???????? |
| estMinutesMin/Max | server calc | ??????? ?? count |
| level | `Questionnaire.difficulty` + count | base + bump, clamp 1..5 |
| tagsPublic | `Questionnaire.tags` | ?????? ????????? ????, max 2 |
| tagsHiddenCount | `Questionnaire.tags` | ??????? |
| status | sessions + pair | in_progress > completed > required > new, locked ???? ??? ???? |
| progressPct | answers | ?????????? questionId ?? sessionId+by |
| cta | status | locked/result/continue/start |
| isStarter | `Questionnaire.meta.isStarter` | ?????? ???????? |
| pairId | `Pair._id` | ??? ?????? ????? |

## Evidence (path:line)
- `Questionnaire.axis/target/difficulty/questions/meta`: `src/models/Questionnaire.ts:6,23,29,33,51-62`
- `Pair.members`: `src/models/Pair.ts:16,51`
- `PairQuestionnaireSession.status`: `src/models/PairQuestionnaireSession.ts:9,22`
- `PairQuestionnaireAnswer.by/questionId/sessionId`: `src/models/PairQuestionnaireAnswer.ts:4,7-8,17-21`
- DTO/?????????/???????: `src/app/api/questionnaires/cards/route.ts:109-190`

## ?????????
- ????????? ?????? ???????????? ?? `Questionnaire.meta.isStarter`.
- ??????? ??????? ??????????? ? `/api/questionnaires/cards`.
- ???????? ????????? ?? ?????????? `questionId` ? ?????? `sessionId` ? ????????? A/B.
